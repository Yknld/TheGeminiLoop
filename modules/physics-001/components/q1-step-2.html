<div class="module-container" style="font-family: 'Arial', sans-serif; display: flex; flex-direction: column; align-items: center; padding: 15px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); background-color: #f9fafb; max-width: 100%; box-sizing: border-box;">
    <style>
        .module-container {
            max-width: 600px;
            width: 100%;
            gap: 15px;
        }
        .diagram-area {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 250px;
        }
        .controls-area {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 10px;
            padding: 0 10px;
            box-sizing: border-box;
        }
        .control-group {
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }
        .control-group label {
            font-size: 1em;
            color: #333;
            white-space: nowrap;
        }
        .control-group input[type="range"] {
            flex-grow: 1;
            -webkit-appearance: none;
            height: 8px;
            background: #e0e0e0;
            border-radius: 5px;
            outline: none;
            max-width: 300px;
        }
        .control-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: #2563eb;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .control-group input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #2563eb;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .control-group span {
            font-weight: bold;
            color: #2563eb;
            min-width: 45px;
            text-align: right;
        }
        .equation-area {
            width: 100%;
            text-align: center;
            padding-top: 5px;
        }
        .equation-area p {
            font-size: 1.2em;
            color: #333;
            margin: 0;
        }
        .vector-label {
            font-size: 0.9em;
            font-weight: bold;
            pointer-events: none;
        }
        /* Specific colors for labels */
        .m2g-label { fill: #1e40af; } /* Darker blue */
        .T-label { fill: #dc2626; } /* Red */
        .a-label { fill: #ea580c; } /* Orange */
        .m2-label { fill: #16a34a; } /* Light green associated with block */

        /* Arrowhead styles */
        .arrowhead {
            fill: var(--arrow-color, black);
            stroke: var(--arrow-color, black);
            stroke-width: 1;
        }
    </style>

    <div class="diagram-area">
        <svg id="hangingMassSVG" viewBox="0 0 400 300" style="width: 100%; height: auto; max-height: 280px; overflow: visible;">
            <!-- Define arrow markers -->
            <defs>
                <marker id="arrowRed" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto-start-reverse">
                    <path d="M 0 0 L 10 5 L 0 10 z" class="arrowhead" style="fill:#dc2626; stroke:#dc2626;" />
                </marker>
                <marker id="arrowBlue" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                    <path d="M 0 0 L 10 5 L 0 10 z" class="arrowhead" style="fill:#1e40af; stroke:#1e40af;" />
                </marker>
                <marker id="arrowOrange" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                    <path d="M 0 0 L 10 5 L 0 10 z" class="arrowhead" style="fill:#ea580c; stroke:#ea580c;" />
                </marker>
            </defs>

            <!-- String attachment point -->
            <circle cx="200" cy="30" r="3" fill="#666" />

            <!-- String -->
            <line id="stringLine" x1="200" y1="30" x2="200" y2="100" stroke="#666" stroke-width="2"/>

            <!-- Mass m2 (light green block) -->
            <rect id="massBlock" x="175" y="100" width="50" height="50" fill="#a3e635" stroke="#16a34a" stroke-width="2" rx="5" ry="5"/>
            <text id="m2Label" x="200" y="125" text-anchor="middle" alignment-baseline="middle" class="vector-label m2-label">m<sub>2</sub></text>

            <!-- Forces/Acceleration -->
            <!-- Tension T (red, upward from top of block) -->
            <line id="tensionVector" x1="200" y1="100" x2="200" y2="70" stroke="#dc2626" stroke-width="3" marker-end="url(#arrowRed)" />
            <text id="tensionLabel" x="190" y="85" text-anchor="end" alignment-baseline="middle" class="vector-label T-label">T</text>

            <!-- Gravitational Force m2g (dark blue, downward from center of block) -->
            <line id="m2gVector" x1="200" y1="125" x2="200" y2="175" stroke="#1e40af" stroke-width="3" marker-end="url(#arrowBlue)" />
            <text id="m2gLabel" x="220" y="150" text-anchor="start" alignment-baseline="middle" class="vector-label m2g-label">m<sub>2</sub>g</text>

            <!-- Acceleration a (orange, downward, slightly offset from center) -->
            <line id="aVector" x1="215" y1="125" x2="215" y2="155" stroke="#ea580c" stroke-width="3" marker-end="url(#arrowOrange)" />
            <text id="aLabel" x="230" y="140" text-anchor="start" alignment-baseline="middle" class="vector-label a-label">a</text>
        </svg>
    </div>

    <div class="controls-area">
        <div class="control-group">
            <label for="massSlider">Mass m<sub>2</sub>:</label>
            <input type="range" id="massSlider" min="0.5" max="5.0" step="0.1" value="2.5">
            <span id="massValue">2.5 kg</span>
        </div>
    </div>

    <div class="equation-area">
        <p id="equationDisplay">m<sub>2</sub> g - T = m<sub>2</sub> a</p>
    </div>

    <script>
        (function() {
            const massSlider = document.getElementById('massSlider');
            const massValueSpan = document.getElementById('massValue');
            const equationDisplay = document.getElementById('equationDisplay');

            const stringLine = document.getElementById('stringLine');
            const massBlock = document.getElementById('massBlock');
            const m2Label = document.getElementById('m2Label');
            const tensionVector = document.getElementById('tensionVector');
            const tensionLabel = document.getElementById('tensionLabel');
            const m2gVector = document.getElementById('m2gVector');
            const m2gLabel = document.getElementById('m2gLabel');
            const aVector = document.getElementById('aVector');
            const aLabel = document.getElementById('aLabel');

            const g = 9.8; // m/s^2
            const a_constant = 2.0; // m/s^2, chosen for illustrative purposes where a < g
            const vectorScaleForce = 2.5; // pixels per Newton (for m2g and T)
            const vectorScaleAcc = 10; // pixels per m/s^2 (for a)

            const blockHeight = 50;
            const blockCenterYOffset = blockHeight / 2; // Offset from block top to center

            const blockTopY_fixed = 100; // Y coordinate of the top of the block
            const blockCenterY_fixed = blockTopY_fixed + blockCenterYOffset; // Y coordinate of the center of the block

            function updateVisualization() {
                const m2 = parseFloat(massSlider.value);
                massValueSpan.textContent = m2.toFixed(1) + ' kg';

                // Calculate forces based on fixed acceleration
                const force_m2g = m2 * g;
                const force_T = m2 * (g - a_constant); // T = m2*g - m2*a

                // Update string line end point (connects to top of block)
                stringLine.setAttribute('y2', blockTopY_fixed);

                // Update block position (y is already fixed to blockTopY_fixed in HTML)
                // massBlock.setAttribute('y', blockTopY_fixed); // It's already fixed in initial HTML
                m2Label.setAttribute('y', blockCenterY_fixed);

                // Update m2g vector (downward from block center)
                const m2gVectorLength = force_m2g * vectorScaleForce;
                m2gVector.setAttribute('y1', blockCenterY_fixed);
                m2gVector.setAttribute('y2', blockCenterY_fixed + m2gVectorLength);
                m2gLabel.setAttribute('y', blockCenterY_fixed + m2gVectorLength / 2);

                // Update Tension T vector (upward from block top)
                const tensionVectorLength = force_T * vectorScaleForce;
                tensionVector.setAttribute('y1', blockTopY_fixed);
                tensionVector.setAttribute('y2', blockTopY_fixed - tensionVectorLength);
                tensionLabel.setAttribute('y', blockTopY_fixed - tensionVectorLength / 2);

                // Update acceleration a vector (downward from block center, offset for visibility)
                // The 'a' vector length represents acceleration magnitude and is kept constant
                // as 'a_constant' is fixed.
                const aVectorLength = a_constant * vectorScaleAcc;
                aVector.setAttribute('y1', blockCenterY_fixed);
                aVector.setAttribute('y2', blockCenterY_fixed + aVectorLength);
                aLabel.setAttribute('y', blockCenterY_fixed + aVectorLength / 2);

                // Update equation display
                equationDisplay.innerHTML = `m<sub>2</sub> g - T = m<sub>2</sub> a`;
                equationDisplay.innerHTML = `<span style="color:#1e40af;">${m2.toFixed(1)}</span> g - <span style="color:#dc2626;">T</span> = <span style="color:#1e40af;">${m2.toFixed(1)}</span> <span style="color:#ea580c;">a</span>`;

            }

            // Initialize
            massSlider.addEventListener('input', updateVisualization);
            updateVisualization();
        })();
    </script>
</div>